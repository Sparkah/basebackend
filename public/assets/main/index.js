System.register("chunks:///_virtual/apiClient.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,n,a,s,u,o,c,i;return{setters:[function(r){e=r.applyDecoratedDescriptor,t=r.inheritsLoose,n=r.initializerDefineProperty,a=r.assertThisInitialized,s=r.asyncToGenerator,u=r.regeneratorRuntime},function(r){o=r.cclegacy,c=r._decorator,i=r.Component}],execute:function(){var p,l,f;o._RF.push({},"58ba2/aDd9N4ZPYhJz/HB9R","apiClient",void 0);var h=c.ccclass,d=c.property;r("apiClient",h("apiClient")((f=e((l=function(r){function e(){for(var e,t=arguments.length,s=new Array(t),u=0;u<t;u++)s[u]=arguments[u];return e=r.call.apply(r,[this].concat(s))||this,n(e,"BaseUrl",f,a(e)),e}t(e,r);var o=e.prototype;return o.sendRunFinished=function(){var r=s(u().mark((function r(e){var t,n,a,s,o,c,i;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=Number(localStorage.getItem("user_fid"))){r.next=9;break}if(!(n=window.miniapp)){r.next=9;break}return r.next=7,n.context;case 7:(a=r.sent)&&a.user&&(t=a.user.fid);case 9:if(t&&0!==t){r.next=12;break}return console.error("‚ùå Fatal Error: No FID found in Storage or Context. Cannot save run."),r.abrupt("return");case 12:return console.log("üöÄ Sending run for FID: "+t+", Score: "+e),s={fid:t,score:e},r.next=16,fetch(this.BaseUrl+"/runs/finish",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});case 16:if((o=r.sent).ok){r.next=23;break}return r.next=20,o.text();case 20:return c=r.sent,console.error("‚ùå API error:",c),r.abrupt("return");case 23:return r.next=25,o.json();case 25:i=r.sent,console.log("‚úÖ Run saved:",i),r.next=32;break;case 29:r.prev=29,r.t0=r.catch(0),console.error("‚ùå Failed to send run:",r.t0);case 32:case"end":return r.stop()}}),r,this,[[0,29]])})));return function(e){return r.apply(this,arguments)}}(),o.getAllRuns=function(){var r=s(u().mark((function r(){var e,t,n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(this.BaseUrl+"/runs/all",{method:"GET"});case 3:if((e=r.sent).ok){r.next=10;break}return r.next=7,e.text();case 7:return t=r.sent,console.error("‚ùå API error:",t),r.abrupt("return",[]);case 10:return r.next=12,e.json();case 12:return(n=r.sent).length>0&&console.log("Fetched first run:",n[0]),r.abrupt("return",n);case 17:return r.prev=17,r.t0=r.catch(0),console.error("‚ùå Failed to fetch runs:",r.t0),r.abrupt("return",[]);case 21:case"end":return r.stop()}}),r,this,[[0,17]])})));return function(){return r.apply(this,arguments)}}(),o.upgradeCrit=function(){var r=s(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this._callUpgradeEndpoint("/users/upgradecrit"));case 1:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.upgradeTapValue=function(){var r=s(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this._callUpgradeEndpoint("/users/upgradevalue"));case 1:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.checkScoreStatus=function(){var r=s(u().mark((function r(e){var t;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,fetch(this.BaseUrl+"/nft/check/"+e);case 3:return t=r.sent,r.next=6,t.json();case 6:return r.abrupt("return",r.sent);case 9:return r.prev=9,r.t0=r.catch(0),console.error("Check score failed",r.t0),r.abrupt("return",{available:!1,owner:"Error"});case 13:case"end":return r.stop()}}),r,this,[[0,9]])})));return function(e){return r.apply(this,arguments)}}(),o.mintScore=function(){var r=s(u().mark((function r(e){var t,n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=localStorage.getItem("auth_token"),r.next=4,fetch(this.BaseUrl+"/nft/mint",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({score:e})});case 4:return n=r.sent,r.next=7,n.json();case 7:return r.abrupt("return",r.sent);case 10:return r.prev=10,r.t0=r.catch(0),console.error("Minting failed",r.t0),r.abrupt("return",{error:r.t0});case 14:case"end":return r.stop()}}),r,this,[[0,10]])})));return function(e){return r.apply(this,arguments)}}(),o.linkWallet=function(){var r=s(u().mark((function r(e){var t,n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=localStorage.getItem("auth_token")){r.next=4;break}return r.abrupt("return",{success:!1});case 4:return r.next=6,fetch(this.BaseUrl+"/users/link-wallet",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t},body:JSON.stringify({walletAddress:e})});case 6:return n=r.sent,r.next=9,n.json();case 9:return r.abrupt("return",r.sent);case 12:return r.prev=12,r.t0=r.catch(0),console.error("Link wallet failed:",r.t0),r.abrupt("return",{success:!1});case 16:case"end":return r.stop()}}),r,this,[[0,12]])})));return function(e){return r.apply(this,arguments)}}(),o.getMyNfts=function(){var r=s(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.authenticatedGet("/nft/my-nfts"));case 1:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.getNftLeaderboard=function(){var r=s(u().mark((function r(){return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",this.authenticatedGet("/nft/leaderboard"));case 1:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}(),o.authenticatedGet=function(){var r=s(u().mark((function r(e){var t,n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,t=localStorage.getItem("auth_token"),r.next=4,fetch(""+this.BaseUrl+e,{method:"GET",headers:{Authorization:"Bearer "+t}});case 4:return n=r.sent,r.next=7,n.json();case 7:return r.abrupt("return",r.sent);case 10:return r.prev=10,r.t0=r.catch(0),console.error("API Error",r.t0),r.abrupt("return",[]);case 14:case"end":return r.stop()}}),r,this,[[0,10]])})));return function(e){return r.apply(this,arguments)}}(),o._callUpgradeEndpoint=function(){var r=s(u().mark((function r(e){var t,n;return u().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,t=localStorage.getItem("auth_token")){r.next=4;break}return r.abrupt("return",null);case 4:return r.next=6,fetch(""+this.BaseUrl+e,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+t}});case 6:if((n=r.sent).ok){r.next=14;break}return r.t0=console,r.next=11,n.text();case 11:return r.t1=r.sent,r.t0.error.call(r.t0,"Upgrade failed:",r.t1),r.abrupt("return",null);case 14:return r.next=16,n.json();case 16:return r.abrupt("return",r.sent);case 19:return r.prev=19,r.t2=r.catch(0),console.error("Upgrade error:",r.t2),r.abrupt("return",null);case 23:case"end":return r.stop()}}),r,this,[[0,19]])})));return function(e){return r.apply(this,arguments)}}(),e}(i)).prototype,"BaseUrl",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"https://basebackend-production-f4f9.up.railway.app"}}),p=l))||p);o._RF.pop()}}}));

System.register("chunks:///_virtual/authPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var n,t,r,a,o,s;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e._decorator,s=e.Component}],execute:function(){var c;a._RF.push({},"90b9aPjXKdGfqQXsk/Z4xZz","authPanel",void 0);var i=o.ccclass;e("authPanel",i("authPanel")(c=function(e){function a(){return e.apply(this,arguments)||this}n(a,e);var o=a.prototype;return o.initMiniApp=function(){var e=t(r().mark((function e(){var n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.getFarcasterSDK()){e.next=4;break}return console.error("‚ùå SDK not found. Are you in a browser?"),e.abrupt("return");case 4:return console.log("‚úÖ SDK Found. Initializing..."),e.prev=5,e.next=8,n.actions.ready();case 8:return console.log("‚úÖ sent sdk.actions.ready()"),e.next=11,this.silentLogin(n);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),console.error("‚ùå SDK Init Error:",e.t0);case 16:case"end":return e.stop()}}),e,this,[[5,13]])})));return function(){return e.apply(this,arguments)}}(),o.silentLogin=function(){var e=t(r().mark((function e(n){var t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("üïµÔ∏è Starting Silent Login..."),e.next=4,n.context;case 4:if(!(t=e.sent)||!t.user){e.next=11;break}return console.log("üë§ User Context Found:",t.user.username),e.next=9,this.loginToBackend(t.user);case 9:e.next=12;break;case 11:console.warn("‚ö†Ô∏è No user context found. (Running outside Farcaster?)");case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("‚ùå Silent login error:",e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),o.loginToBackend=function(){var e=t(r().mark((function e(n){var t,a;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://basebackend-production-f4f9.up.railway.app/auth/login-silent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fid:n.fid,username:n.username,displayName:n.displayName,pfpUrl:n.pfpUrl})});case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Backend Status: "+t.status);case 6:return e.next=8,t.json();case 8:a=e.sent,console.log("üîê Backend Auth Success! Token:",a.accessToken),localStorage.setItem("auth_token",a.accessToken),localStorage.setItem("user_fid",n.fid.toString()),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.error("‚ùå Backend connection failed:",e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(n){return e.apply(this,arguments)}}(),o.getFarcasterSDK=function(){var e=window.miniapp;return e?e.actions?e:e.default&&e.default.actions?e.default:e.sdk&&e.sdk.actions?e.sdk:null:null},a}(s))||c);a._RF.pop()}}}));

System.register("chunks:///_virtual/clicker.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts"],(function(e){var t,i,r,a,o,n,s,c,l,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,r=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,n=e._decorator,s=e.Node,c=e.RichText,l=e.Label,h=e.Component},function(e){u=e.gameManager}],execute:function(){var m,f,p,_,g,d,T,x,y,b;o._RF.push({},"132a6HotXRCe4xf0UlO+aoz","clicker",void 0);var R=n.ccclass,C=n.property;e("clicker",(m=R("clicker"),f=C(s),p=C(s),_=C(s),m((T=t((d=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return t=e.call.apply(e,[this].concat(o))||this,r(t,"scoreText",T,a(t)),r(t,"timerText",x,a(t)),r(t,"defaultTime",y,a(t)),r(t,"GameManagerNode",b,a(t)),t._gameManager=null,t._playerData=null,t._score=0,t._timer=0,t._gameStarted=!1,t._timerRichText=null,t._scoreRichText=null,t}i(t,e);var o=t.prototype;return o.start=function(){this.node.on(s.EventType.TOUCH_START,this._onClick,this),this._timerRichText=this.timerText.getComponent(c)||this.timerText.getComponent(l),this._scoreRichText=this.scoreText.getComponent(c)||this.scoreText.getComponent(l),this.GameManagerNode&&(this._gameManager=this.GameManagerNode.getComponent(u))},o.setPlayerData=function(e){this._playerData=e},o.startGame=function(){this._gameStarted=!0,this._score=0,this._timer=this.defaultTime,this.updateUI(0,!1)},o.update=function(e){this._gameStarted&&(this._timer-=e,this._timer<=0?this.finishGame():this._timerRichText&&(this._timerRichText.string="<color=#ff0000>Time: </color><color=#ff00ff>"+this._timer.toFixed(2)+"</color>"))},o.finishGame=function(){this._timer=0,this._gameStarted=!1,this._gameManager?this._gameManager.onRunFinished(this._score):console.error("Game Manager not found! Score lost.")},o._onClick=function(){if(this._gameStarted&&!(this._timer<=0)){var e=1;this._playerData&&(e+=this._playerData.currentClickPowerUpgrds||0);var t=!1;if(this._playerData){var i=this._playerData.currentCritsUpgrds||0;100*Math.random()<i&&(t=!0,e*=5,console.log("üî• CRITICAL HIT!"))}this._score+=e,this.updateUI(this._score,t)}},o.updateUI=function(e,t){if(this._scoreRichText){var i=t?"#ff0000":"#0fffff",r=t?"<b>":"",a=t?"</b>":"";this._scoreRichText.string="<color=#00ff00>Score: </color>"+r+"<color="+i+">"+e+"</color>"+a}},t}(h)).prototype,"scoreText",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(d.prototype,"timerText",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(d.prototype,"defaultTime",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),b=t(d.prototype,"GameManagerNode",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=d))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clicker.ts","./apiClient.ts","./leaderboard.ts","./authPanel.ts","./playerStatsPanel.ts","./playerData.ts","./mintPanel.ts","./nftPanel.ts"],(function(e){var t,n,a,i,r,l,o,s,u,c,h,p,f,P,d,y,b,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,i=e.assertThisInitialized,r=e.asyncToGenerator,l=e.regeneratorRuntime},function(e){o=e.cclegacy,s=e._decorator,u=e.Node,c=e.Component},function(e){h=e.clicker},function(e){p=e.apiClient},function(e){f=e.leaderboard},function(e){P=e.authPanel},function(e){d=e.playerStatsPanel},function(e){y=e.playerData},function(e){b=e.mintPanel},function(e){m=e.nftPanel}],execute:function(){var v,g,M,w,C,D,k,L,A,z,N,R,G,S,F,I,U,_,x;o._RF.push({},"a9868MUjVtFyIwKobvEGsik","gameManager",void 0);var j=s.ccclass,T=s.property;e("gameManager",(v=j("gameManager"),g=T(u),M=T(u),w=T(h),C=T(P),D=T(u),k=T(d),L=T(b),A=T(m),v((R=t((N=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,a(t,"GameplayPanel",R,i(t)),a(t,"MenuPanel",G,i(t)),a(t,"Clicker",S,i(t)),a(t,"authPanel",F,i(t)),a(t,"LeaderboardPanel",I,i(t)),a(t,"PlayerStatsPanel",U,i(t)),a(t,"MintPanel",_,i(t)),a(t,"NftPanel",x,i(t)),t.ApiClient=null,t.playerData=null,t}n(t,e);var o=t.prototype;return o.start=function(){var e=this;this.ApiClient=new p,this.playerData=new y,this.authPanel.initMiniApp().then((function(){e.loadAndRefresh()})),this.showMenu()},o.loadAndRefresh=function(){var e=r(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.playerData.loadData();case 2:this.refreshUI();case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.refreshUI=function(){this.PlayerStatsPanel&&this.PlayerStatsPanel.updateStats(this.playerData),this.Clicker&&this.Clicker.setPlayerData(this.playerData)},o.startGame=function(){this.MenuPanel.active=!1,this.GameplayPanel.active=!0,this.authPanel.node.active=!1,this.LeaderboardPanel.active=!1,this.Clicker&&(this.Clicker.setPlayerData(this.playerData),this.Clicker.startGame())},o.onRunFinished=function(e){console.log("Run ended. Score:",e),this.playerData.currentCoins+=e,this.refreshUI(),this.ApiClient&&this.ApiClient.sendRunFinished(e).then((function(){console.log("Run synced to server.")})),this.GameplayPanel.active=!1,this.MintPanel?(this.MintPanel.init(this),this.MintPanel.show(e)):this.showMenu()},o.showMenu=function(){this.MenuPanel.active=!0,this.GameplayPanel.active=!1,this.LeaderboardPanel.active=!1,this.authPanel&&(this.authPanel.node.active=!1)},o.showNormalLeaderboard=function(){this.LeaderboardPanel.active=!0;var e=this.LeaderboardPanel.getComponent(f);e&&this.ApiClient&&this.ApiClient.getAllRuns().then((function(t){return e.showLeaderboard(t)})),this.MenuPanel.active=!1},o.onMyNftsClicked=function(){this.MenuPanel.active=!1,this.NftPanel.init(this),this.NftPanel.showMyCollection()},o.onNftLeaderboardClicked=function(){this.MenuPanel.active=!1,this.NftPanel.init(this),this.NftPanel.showLeaderboard()},t}(c)).prototype,"GameplayPanel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(N.prototype,"MenuPanel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(N.prototype,"Clicker",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(N.prototype,"authPanel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(N.prototype,"LeaderboardPanel",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(N.prototype,"PlayerStatsPanel",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(N.prototype,"MintPanel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(N.prototype,"NftPanel",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=N))||z));o._RF.pop()}}}));

System.register("chunks:///_virtual/gameplayPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,a,r;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,a=e._decorator,r=e.Component}],execute:function(){var o;n._RF.push({},"32d94ZjjV9J2a4SVz73rGRi","gameplayPanel",void 0);var c=a.ccclass;a.property,e("gameplayPanel",c("gameplayPanel")(o=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var a=n.prototype;return a.start=function(){},a.update=function(e){},n}(r))||o);n._RF.pop()}}}));

System.register("chunks:///_virtual/leaderboard.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts"],(function(e){var t,r,n,a,o,i,s,l,c,u,p,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){o=e.cclegacy,i=e._decorator,s=e.Prefab,l=e.Button,c=e.instantiate,u=e.RichText,p=e.Component},function(e){f=e.gameManager}],execute:function(){var h,d,b,g,y,m,P,_,v;o._RF.push({},"ce6f55mAYxHbqEEg4BgpKRh","leaderboard",void 0);var x=i.ccclass,C=i.property;e("leaderboard",(h=x("leaderboard"),d=C(s),b=C(l),g=C(f),h((P=t((m=function(e){function t(){for(var t,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,n(t,"DisplyPlayerPrefab",P,a(t)),n(t,"backBtn",_,a(t)),n(t,"gameManagerNode",v,a(t)),t._textNodes=[],t._textComponents=[],t._maxLeaders=100,t}r(t,e);var o=t.prototype;return o.start=function(){if(this.DisplyPlayerPrefab){this.backBtn&&this.backBtn.node.on(l.EventType.CLICK,this._onBackClicked,this);for(var e=0;e<this._maxLeaders;e++){var t=c(this.DisplyPlayerPrefab),r=t.getComponent(u);r?(r.string="",this._textNodes.push(t),this._textComponents.push(r),this.node.addChild(t)):console.error("Prefab has no RichText component")}}else console.error("DisplyPlayerPrefab is not set")},o.showLeaderboard=function(e){for(var t=0;t<this._textComponents.length;t++){var r=this._textComponents[t];if(t>=e.length)r.string="";else{var n=e[t],a=n.user?n.user.username:"Unknown Player";new Date(n.createdAt).toLocaleDateString();r.string="<color=#00ff00>"+(t+1)+".</color> "+a+" - Score: <color=#ff0000>"+n.score+"</color>"}}},o._onBackClicked=function(){this.gameManagerNode.showMenu()},t}(p)).prototype,"DisplyPlayerPrefab",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(m.prototype,"backBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(m.prototype,"gameManagerNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=m))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./leaderboard.ts","./apiClient.ts","./authPanel.ts","./gameManager.ts","./clicker.ts","./gameplayPanel.ts","./playerStatsPanel.ts","./menuPanel.ts","./mintPanel.ts","./nftPanel.ts","./playerData.ts","./walletPanel.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/menuPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameManager.ts"],(function(e){var t,n,a,r,i,o,l,u,s;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,l=e.Button,u=e.Component},function(e){s=e.gameManager}],execute:function(){var c,d,m,h,b,p,f,w,v,y,g,M,N;i._RF.push({},"e63a2xJQZhH84RwMMJR4t2b","menuPanel",void 0);var B=o.ccclass,L=o.property;e("menuPanel",(c=B("menuPanel"),d=L(s),m=L(l),h=L(l),b=L(l),p=L(l),c((v=t((w=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,a(t,"GameManager",v,r(t)),a(t,"startGameBtn",y,r(t)),a(t,"viewNormalLeaderbiardBtn",g,r(t)),a(t,"viewNFTLeaderboardBtn",M,r(t)),a(t,"viewMyNFTButton",N,r(t)),t}n(t,e);var i=t.prototype;return i.start=function(){this.startGameBtn&&this.startGameBtn.node.on(l.EventType.CLICK,this._onStartClicked,this),this.viewNormalLeaderbiardBtn&&this.viewNormalLeaderbiardBtn.node.on(l.EventType.CLICK,this._onViewNormalLeaderboardClicked,this),this.viewNFTLeaderboardBtn&&this.viewNFTLeaderboardBtn.node.on(l.EventType.CLICK,this._onViewNFTLeaderboardClicked,this),this.viewMyNFTButton&&this.viewMyNFTButton.node.on(l.EventType.CLICK,this._onviewMyNFTButton,this)},i._onStartClicked=function(){this.GameManager&&this.GameManager.startGame()},i._onViewNormalLeaderboardClicked=function(){this.GameManager&&this.GameManager.showNormalLeaderboard()},i._onViewNFTLeaderboardClicked=function(){this.GameManager&&this.GameManager.onNftLeaderboardClicked()},i._onviewMyNFTButton=function(){this.GameManager&&this.GameManager.onMyNftsClicked()},t}(u)).prototype,"GameManager",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=t(w.prototype,"startGameBtn",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(w.prototype,"viewNormalLeaderbiardBtn",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(w.prototype,"viewNFTLeaderboardBtn",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=t(w.prototype,"viewMyNFTButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=w))||f));i._RF.pop()}}}));

System.register("chunks:///_virtual/mintPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./apiClient.ts"],(function(t){var n,e,i,r,a,s,o,l,c,u,p,h;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,r=t.assertThisInitialized,a=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,l=t._decorator,c=t.Label,u=t.Button,p=t.Component},function(t){h=t.apiClient}],execute:function(){var g,b,f,d,m,v,w,C,y,B,k;o._RF.push({},"c7bb75Pr/JCs6SKEGN0KwuE","mintPanel",void 0);var L=l.ccclass,S=l.property;t("mintPanel",(g=L("mintPanel"),b=S(c),f=S(c),d=S(u),m=S(u),g((C=n((w=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return n=t.call.apply(t,[this].concat(a))||this,i(n,"titleLabel",C,r(n)),i(n,"statusLabel",y,r(n)),i(n,"mintButton",B,r(n)),i(n,"closeButton",k,r(n)),n.apiClient=new h,n.gameManager=null,n.currentScore=0,n}e(n,t);var o=n.prototype;return o.init=function(t){this.gameManager=t,this.mintButton.node.on(u.EventType.CLICK,this.onMintClicked,this),this.closeButton.node.on(u.EventType.CLICK,this.onCloseClicked,this)},o.show=function(){var t=a(s().mark((function t(n){var e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.node.active=!0,this.currentScore=n,this.titleLabel.string="Score: "+n,this.statusLabel.string="Checking status...",this.mintButton.node.active=!1,this.closeButton.node.active=!0,t.next=8,this.apiClient.checkScoreStatus(n);case 8:(e=t.sent).available?(this.statusLabel.string="‚ú® LEGENDARY SCORE! ‚ú®\nTap to Mint NFT",this.mintButton.node.active=!0,this.mintButton.interactable=!0):(this.statusLabel.string="üîí Taken By:\n"+(e.owner||"Unknown"),this.mintButton.node.active=!1);case 10:case"end":return t.stop()}}),t,this)})));return function(n){return t.apply(this,arguments)}}(),o.onMintClicked=function(){var t=a(s().mark((function t(){var n,e;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.mintButton.interactable=!1,n=this.gameManager.playerData.walletAddress,console.log("üîç Mint Clicked. Wallet Address:",n),n&&n.startsWith("0x")){t.next=14;break}return this.statusLabel.string="Connecting Wallet...",console.log("üöÄ Starting Wallet Connection Flow..."),t.next=9,this.connectWalletFlow();case 9:if(t.sent){t.next=14;break}return this.statusLabel.string="‚ùå Wallet Required to Mint",this.mintButton.interactable=!0,t.abrupt("return");case 14:return this.statusLabel.string="Minting NFT... (Please Wait)",t.next=17,this.apiClient.mintScore(this.currentScore);case 17:(e=t.sent)&&e.success?(this.statusLabel.string="‚úÖ SUCCESS!\nYou own this score.",this.mintButton.node.active=!1):(console.error("Mint Error:",e),this.statusLabel.string="‚ùå Mint Failed. Try again.",this.mintButton.interactable=!0);case 19:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.connectWalletFlow=function(){var t=a(s().mark((function t(){var n,e,i,r,a,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=null!=(n=window.miniapp)&&n.actions?window.miniapp:null==(e=window.miniapp)?void 0:e.default){t.next=4;break}return console.error("‚ùå Base SDK not found"),t.abrupt("return",!1);case 4:return t.prev=4,console.log("üì± Opening Base Sign In..."),t.next=8,i.actions.signIn({nonce:Math.random().toString(36).substring(2)});case 8:if(r=t.sent,console.log("‚úÖ SDK Sign In Result:",r),a=r.message.match(/0x[a-fA-F0-9]{40}/),!(o=a?a[0]:null)){t.next=17;break}return t.next=15,this.apiClient.linkWallet(o);case 15:return this.gameManager.playerData.walletAddress=o,t.abrupt("return",!0);case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(4),console.error("‚ùå Connect failed:",t.t0);case 22:return t.abrupt("return",!1);case 23:case"end":return t.stop()}}),t,this,[[4,19]])})));return function(){return t.apply(this,arguments)}}(),o.onCloseClicked=function(){this.node.active=!1,this.gameManager&&this.gameManager.showMenu()},n}(p)).prototype,"titleLabel",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=n(w.prototype,"statusLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=n(w.prototype,"mintButton",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(w.prototype,"closeButton",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=w))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/nftPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./apiClient.ts"],(function(e){var t,n,i,r,a,o,l,s,c,u,p,f,h,g,m,d,b,v,w;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,o=e.regeneratorRuntime},function(e){l=e.cclegacy,s=e._decorator,c=e.Label,u=e.ScrollView,p=e.Prefab,f=e.Button,h=e.instantiate,g=e.Sprite,m=e.ImageAsset,d=e.Texture2D,b=e.SpriteFrame,v=e.Component},function(e){w=e.apiClient}],execute:function(){var y,L,C,P,M,B,I,x,z,S,V;l._RF.push({},"4e5daWWO4dEbbOeZOJtY1r7","nftPanel",void 0);var A=s.ccclass,D=s.property;e("nftPanel",(y=A("nftPanel"),L=D(c),C=D(u),P=D(p),M=D(f),y((x=t((I=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"titleLabel",x,r(t)),i(t,"scrollView",z,r(t)),i(t,"itemPrefab",S,r(t)),i(t,"closeButton",V,r(t)),t.apiClient=new w,t.gameManager=null,t}n(t,e);var l=t.prototype;return l.init=function(e){this.gameManager=e,this.closeButton.node.on(f.EventType.CLICK,this.onClose,this)},l.showMyCollection=function(){var e=a(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.node.active=!0,this.titleLabel.string="My Collection",this.clearList(),e.next=5,this.apiClient.getMyNfts();case 5:t=e.sent,this.populateList(t,!0);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.showLeaderboard=function(){var e=a(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.node.active=!0,this.titleLabel.string="Minted Leaderboard",this.clearList(),e.next=5,this.apiClient.getNftLeaderboard();case 5:t=e.sent,this.populateList(t,!1);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),l.populateList=function(e,t){var n=this;this.clearList(),console.log("Populating List with:",e),e&&0!==e.length&&e.forEach((function(e,i){var r,a=h(n.itemPrefab);a.parent=n.scrollView.content;var o=null==(r=a.getChildByName("Label"))?void 0:r.getComponent(c);if(o||(o=a.getComponentInChildren(c)),o){var l,s=t?"üèÜ Score: "+e.score:"#"+(i+1)+" "+((null==(l=e.owner)?void 0:l.username)||"Anon")+" - "+e.score;o.string=s}else console.warn("‚ùå Could not find Label component in Prefab!");var u=a.getChildByName("Icon");if(u){var p=u.getComponent(g);e.imageUrl&&e.imageUrl.length>50&&n.loadBase64Image(p,e.imageUrl)}}))},l.loadBase64Image=function(e,t){var n=new Image;n.src=t,n.onload=function(){var t=new m(n),i=new d;i.image=t;var r=new b;r.texture=i,e.spriteFrame=r}},l.clearList=function(){this.scrollView.content.removeAllChildren()},l.onClose=function(){this.node.active=!1,this.gameManager&&this.gameManager.showMenu()},t}(v)).prototype,"titleLabel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(I.prototype,"scrollView",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(I.prototype,"itemPrefab",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(I.prototype,"closeButton",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=I))||B));l._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(r){var e,t,a,n,s,o;return{setters:[function(r){e=r.inheritsLoose,t=r.asyncToGenerator,a=r.regeneratorRuntime},function(r){n=r.cclegacy,s=r._decorator,o=r.Component}],execute:function(){var c;n._RF.push({},"7aec06qFr9GuJhc0OFJYvEf","playerData",void 0);var u=s.ccclass;r("playerData",u("playerData")(c=function(r){function n(){for(var e,t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];return(e=r.call.apply(r,[this].concat(a))||this).currentCoins=0,e.currentCritsUpgrds=0,e.currentClickPowerUpgrds=0,e.walletAddress=null,e}return e(n,r),n.prototype.loadData=function(){var r=t(a().mark((function r(){var e,t,n;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(r.prev=0,e=localStorage.getItem("auth_token")){r.next=4;break}return r.abrupt("return");case 4:return r.next=6,fetch("https://basebackend-production-f4f9.up.railway.app/users/profile",{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer "+e}});case 6:if((t=r.sent).ok){r.next=9;break}throw new Error("Status: "+t.status);case 9:return r.next=11,t.json();case 11:n=r.sent,this.currentCoins=n.coins||0,this.currentCritsUpgrds=n.critUpgrades||0,this.currentClickPowerUpgrds=n.valueUpgrades||0,this.walletAddress=n.walletAddress||null,console.log("‚úÖ Data Loaded. Wallet:",this.walletAddress),r.next=22;break;case 19:r.prev=19,r.t0=r.catch(0),console.error("Error loading player data:",r.t0);case 22:case"end":return r.stop()}}),r,this,[[0,19]])})));return function(){return r.apply(this,arguments)}}(),n}(o))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/playerStatsPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./apiClient.ts"],(function(t){var e,r,n,a,i,s,o,u,c,l,p,h,d,f,g,C,B;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized,i=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,u=t._decorator,c=t.Node,l=t.Button,p=t.Label,h=t.RichText,d=t.Sprite,f=t.Color,g=t.tween,C=t.Component},function(t){B=t.apiClient}],execute:function(){var b,U,w,y,_,x,v,T,m,k,P,V,S;o._RF.push({},"85eabwMKVZH6o9g8/K/Ipfz","playerStatsPanel",void 0);var z=u.ccclass,L=u.property;t("playerStatsPanel",(b=z("playerStatsPanel"),U=L(c),w=L(c),y=L(c),_=L(l),x=L(l),b((m=e((T=function(t){function e(){for(var e,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,n(e,"coinsText",m,a(e)),n(e,"critText",k,a(e)),n(e,"incomeText",P,a(e)),n(e,"critUpgradeBtn",V,a(e)),n(e,"tapValueUpgradeBtn",S,a(e)),e.apiClient=new B,e._data=null,e}r(e,t);var o=e.prototype;return o.start=function(){this.critUpgradeBtn&&this.critUpgradeBtn.node.on(l.EventType.CLICK,this.onBuyCrit,this),this.tapValueUpgradeBtn&&this.tapValueUpgradeBtn.node.on(l.EventType.CLICK,this.onBuyValue,this)},o.onBuyCrit=function(){var t=i(s().mark((function t(){var e,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._data){t.next=2;break}return t.abrupt("return");case 2:if(e=this.calculateCost(this._data.currentCritsUpgrds||1,200,1.8),!(this._data.currentCoins<e)){t.next=6;break}return this.flashButton(this.critUpgradeBtn.node,new f(255,0,0)),t.abrupt("return");case 6:return this._data.currentCoins-=e,this._data.currentCritsUpgrds+=1,this.updateStats(this._data),this.flashButton(this.critUpgradeBtn.node,new f(0,255,0)),t.next=12,this.apiClient.upgradeCrit();case 12:(r=t.sent)&&!r.error||(console.error("Upgrade failed on server, rolling back"),this._data.currentCoins+=e,this._data.currentCritsUpgrds-=1,this.updateStats(this._data),this.flashButton(this.critUpgradeBtn.node,new f(255,0,0)));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.onBuyValue=function(){var t=i(s().mark((function t(){var e,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._data){t.next=2;break}return t.abrupt("return");case 2:if(e=this.calculateCost(this._data.currentClickPowerUpgrds||1,50,1.4),!(this._data.currentCoins<e)){t.next=6;break}return this.flashButton(this.tapValueUpgradeBtn.node,new f(255,0,0)),t.abrupt("return");case 6:return this._data.currentCoins-=e,this._data.currentClickPowerUpgrds+=1,this.updateStats(this._data),this.flashButton(this.tapValueUpgradeBtn.node,new f(0,255,0)),t.next=12,this.apiClient.upgradeTapValue();case 12:(r=t.sent)&&!r.error||(console.error("Upgrade failed on server, rolling back"),this._data.currentCoins+=e,this._data.currentClickPowerUpgrds-=1,this.updateStats(this._data),this.flashButton(this.tapValueUpgradeBtn.node,new f(255,0,0)));case 14:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),o.updateStats=function(t){this._data=t,this.setText(this.coinsText,"Coins: "+t.currentCoins),this.setText(this.critText,"Crit Chance: "+t.currentCritsUpgrds+"%"),this.setText(this.incomeText,"Tap Power: "+t.currentClickPowerUpgrds);var e=this.calculateCost(t.currentCritsUpgrds||1,200,1.8),r=this.calculateCost(t.currentClickPowerUpgrds||1,50,1.4);this.setButtonLabel(this.critUpgradeBtn,"Upgrade Crit\n("+e+")"),this.setButtonLabel(this.tapValueUpgradeBtn,"Upgrade Power\n("+r+")")},o.calculateCost=function(t,e,r){return Math.floor(e*Math.pow(r,t-1))},o.setText=function(t,e){if(t){var r=t.getComponent(p)||t.getComponent(h);r&&(r.string=e)}},o.setButtonLabel=function(t,e){if(t){var r=t.getComponentInChildren(p)||t.getComponentInChildren(h);r&&(r.string=e)}},o.flashButton=function(t,e){var r=t.getComponent(d);if(r){var n=new f(255,255,255);g(r).to(.1,{color:e}).delay(.2).to(.3,{color:n}).start()}},e}(C)).prototype,"coinsText",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(T.prototype,"critText",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(T.prototype,"incomeText",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(T.prototype,"critUpgradeBtn",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=e(T.prototype,"tapValueUpgradeBtn",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=T))||v));o._RF.pop()}}}));

System.register("chunks:///_virtual/walletPanel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./apiClient.ts"],(function(t){var e,n,a,r,i,s,o,u,c,l,p,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized,i=t.asyncToGenerator,s=t.regeneratorRuntime},function(t){o=t.cclegacy,u=t._decorator,c=t.Label,l=t.Button,p=t.Component},function(t){d=t.apiClient}],execute:function(){var h,f,g,b,v,S,y;o._RF.push({},"165caKl1ktHMZIP9lBox9RM","walletPanel",void 0);var C=u.ccclass,k=u.property;t("walletPanel",(h=C("walletPanel"),f=k(c),g=k(l),h((S=e((v=function(t){function e(){for(var e,n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return e=t.call.apply(t,[this].concat(i))||this,a(e,"statusLabel",S,r(e)),a(e,"connectButton",y,r(e)),e.apiClient=new d,e}n(e,t);var o=e.prototype;return o.start=function(){var t=this.getFarcasterSDK();t&&t.actions.ready(),this.connectButton&&this.connectButton.node.on(l.EventType.CLICK,this.onConnectClicked,this)},o.onConnectClicked=function(){var t=i(s().mark((function t(){var e,n,a;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getFarcasterSDK()){t.next=4;break}return this.updateStatus("‚ùå Error: Run in Base App"),t.abrupt("return");case 4:return t.prev=4,this.updateStatus("Requesting Wallet..."),t.next=8,e.actions.signIn({nonce:this.generateNonce()});case 8:if(n=t.sent,console.log("‚úÖ Sign In Result:",n),a=this.extractAddressFromMessage(n.message)){t.next=14;break}return this.updateStatus("‚ùå Could not find address"),t.abrupt("return");case 14:return this.updateStatus("Linking to Account..."),t.next=17,this.apiClient.linkWallet(a);case 17:t.sent.success?(this.updateStatus("‚úÖ Linked: "+a.substring(0,6)+"..."),this.connectButton.node.active=!1):this.updateStatus("‚ùå Backend Link Failed"),t.next=25;break;case 21:t.prev=21,t.t0=t.catch(4),console.error("Sign In Error:",t.t0),this.updateStatus("‚ùå Connection Cancelled");case 25:case"end":return t.stop()}}),t,this,[[4,21]])})));return function(){return t.apply(this,arguments)}}(),o.getFarcasterSDK=function(){var t=window.miniapp;return t?t.actions?t:t.default&&t.default.actions?t.default:null:null},o.extractAddressFromMessage=function(t){var e=t.match(/0x[a-fA-F0-9]{40}/);return e?e[0]:null},o.generateNonce=function(){return Math.random().toString(36).substring(2,15)},o.updateStatus=function(t){this.statusLabel&&(this.statusLabel.string=t)},e}(p)).prototype,"statusLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=e(v.prototype,"connectButton",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=v))||b));o._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});